<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="cl.mineduc.came.apoyo_mejora_continua.mappers.EstablecimientoCategorizacionHistoricaMapper">
	<resultMap id="BaseResultMap"
		type="cl.mineduc.came.apoyo_mejora_continua.modelo.EstablecimientoCategorizacionHistorica">
		<id column="id_establecimiento_categorizacion_historica"
			jdbcType="BIGINT"
			property="id_establecimiento_categorizacion_historica" />
		<result column="id_categorizacion" jdbcType="BIGINT"
			property="id_categorizacion" />
		<result column="id_establecimiento" jdbcType="BIGINT"
			property="id_establecimiento" />
	</resultMap>
	
	<sql id="query">
		select _ech.id_establecimiento_categorizacion_historica, 
			   _ech.id_categorizacion,
			   _ech.id_establecimiento
		from came.came_establecimiento_categorizacion_historica _ech
	</sql>	
	
	<delete id="deleteById" parameterType="java.lang.Long">
		delete from came.came_establecimiento_categorizacion_historica
		where id_establecimiento_categorizacion_historica =#{idEstablecimientoCategorizacionHistorica,jdbcType=BIGINT}
	</delete>
	<insert id="insert"
		parameterType="cl.mineduc.came.apoyo_mejora_continua.modelo.EstablecimientoCategorizacionHistorica">
		insert into came.came_establecimiento_categorizacion_historica
				(id_establecimiento_categorizacion_historica, id_categorizacion, id_establecimiento)
		values (#{est.idEstablecimientoCategorizacionHistorica,jdbcType=BIGINT},
				#{est.idCategorizacion,jdbcType=BIGINT},
				#{est.idCstablecimiento,jdbcType=BIGINT})
	</insert>
	<update id="updateById"
		parameterType="cl.mineduc.came.apoyo_mejora_continua.modelo.EstablecimientoCategorizacionHistorica">
		update came.came_establecimiento_categorizacion_historica
		set id_categorizacion = #{est.idCategorizacion,jdbcType=BIGINT},
			id_establecimiento = #{idEstablecimiento,jdbcType=BIGINT}
		where id_establecimiento_categorizacion_historica =	#{est.idEstablecimientoCategorizacionHistorica,jdbcType=BIGINT}
	</update>
	<select id="getById" parameterType="java.lang.Long"	resultMap="BaseResultMap">
		select 'false' as QUERYID,id_establecimiento_categorizacion_historica,
		<include refid="query"></include>
		where _ech.id_establecimiento_categorizacion_historica =	#{idEstablecimientoCategorizacionHistorica,jdbcType=BIGINT}
	</select>
	<select id="getAll" resultMap="BaseResultMap">
		<include refid="query"></include>
		order by _ech.id_establecimiento_categorizacion_historica asc
	</select>
</mapper>